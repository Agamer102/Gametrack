{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Library{% endblock %}</h1>
  {% for message in get_flashed_messages() %}
    <span class="flash">{{ message }}</span>
  {% endfor %}
{% endblock %}


{% block content %}
{% if user_library %}
<div class="row row-cols-1 row-cols-md-6 g-4">
  {% for entry in user_library %}
  {% if entry.removed == 0 %}
    <div class="col">
      <div class="card">
        {% if entry.steam_appid %}
        <img src="https://steamcdn-a.akamaihd.net/steam/apps/{{ entry.steam_appid }}/library_600x900_2x.jpg" class="card-img-top" alt="">
        {% else %}
        <img src="{{ entry.image }}" class="card-img-top" alt="">
        {% endif %}
        <div class="card-body">
          <h5 class="card-title">{{ entry.name }}</h5>
          <p class="card-text">Playtime: {{ entry.time//60 }}H {{ entry.time%60 }}M</p>
          {% if entry.rating %}
          <p class="card-text"></p>Rating: {{ entry.rating }}</p>
          {% endif %}
          <p class="card-text">
            <button 
            class="btn btn-secondary btn-sm" 
            data-bs-toggle="modal" 
            data-bs-target="#updateGameModal" 
            data-bs-gameid="{{ entry.game_id }}" 
            data-bs-gamename="{{ entry.name }}" 
            data-bs-gamesteamid="{{ entry.steam_appid if entry.steam_appid is not none else '' }}"
            data-bs-gamevndbid="{{ entry.vndbid if entry.vndbid is not none else '' }}"
            data-bs-gametime="{{ entry.time }}"
            data-bs-gamerating="{{ entry.rating if entry.rating is not none else '' }}">
              Update
            </button>
          </p>  
        </div>
      </div>
    </div>
  {% endif %}
  {% endfor %}
</div>
{% endif %}
{% endblock %}